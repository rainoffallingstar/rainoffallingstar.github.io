---
layout: mypost
title: 近远期医学Deeplearning项目展望与行动2022
categories: [规划]
---

### 近远期医学Deeplearning项目展望与行动2022

> 建立规范管理（根据学术规范获取、处理数据）
> 
> 提出处理规范（根据通用程序要求）
> 
> 列举可用工具及开源数据集
> 
> 通用化处理平台的技术路线及方向（云计算、全程可视化、训练可视化；Docker+webUI？）

# 

#### 深度学习框架及其使用（基于docker：deepo）

##### 非docker下的tensorflow & pytorch 的安装与设置

```bash
#安装python3、pip
#pip换源
pip install pqi # 当系统上python2与python3共存时命令为pip3
pqi use tuna  # pip换源为清华镜像站，需要其他镜像站的使用命令 pqi ls
#安装cuda及其对应的cudnn，设置系统变量与环境变量
#安装tensorflow；详细教程：https://www.jianshu.com/p/aba13306d172
pip install tensorflow_gpu #默认寻找最新版本，当需要指定版本时（如1.13.1）使用pip install tensorflow_gpu==1.13.1
#安装 pytorch；详细教程见官网：https://pytorch.org/get-started/locally/
pip install torch==1.6.0+cu101 torchvision==0.7.0+cu101 -f https://download.pytorch.org/whl/torch_stable.html# 以1.6.0版本为例
#设置系统变量与环境变量
```

##### docker下的tensorflow & pytorch 的安装与设置

```bash
#安装docker
#拉取deepo、显卡驱动镜像
docker pull ufoym/deepo
docker pull nvidia-docker
#启动显卡镜像与deepo容器相通
nvidia-docker run --rm ufoym/deepo nvidia-smi # 如果该命令不起作用，那么可以在 nvidia-docker GitHub 项目中搜索 Issues 部分，上面有很多解决方案。
#设置环境变量与启动shell与deepo相通
nvidia-docker run -it --ipc=host #增加共享内存大小 -v /host/data:/data
#（主机data目录：/data的映射；以下同理） -v /host/config:/config ufoym/deepo bash
```

#### 数据集与数据内容

##### 数据标注与处理规范

使用label-studio进行数据标注（可选）。安装方式如下：

```bash
# pip
# Install the package
pip install -U label-studio
# Launch it!
label-studio
# docker
docker pull heartexlabs/label-studio:latest
# Run latest Docker version
docker run -it -p 8080:8080 -v `pwd`/mydata:/label-studio/data heartexlabs/label-studio:latest
# Now visit http://localhost:8080/
```

目前使用的文件中，理想的原始数据库⽂件分布是：
dataset/Task001_kidneycancer #任务序号及部位/rawdata

├── dataset.json #数据库说明文件（可无）

├──CCR #分类一

│   ├── la_003_0000.jpg #⽂件命名格式，512*512大小

│   ├── la_004_0000.jpg

│   ├── ...

├── CMR #分类二

│   ├── la_001_0000.jpg #⽂件命名格式，512*512大小

│   ├── la_002_0000.jpg

│   ├── ...

├── ... #分类三

经过resize与增强后随机抽取的数据集文件分布如下：

dataset/Task001_kidneycancer /data

├── dataset.json #数据库说明文件（可无）

├── train #训练集

|   ├── CCR #分类一

│   |    ├── la_003_0000.jpg 

│   |    ├── la_004_0000.jpg

│   ├── CMR #分类二

│   |    ├── la_001_0000.jpg 

│   |    ├── la_002_0000.jpg

├── validation #验证集

| ├── CCR #分类一

│   |    ├── la_005_0000.jpg 

│   |    ├── la_006_0000.jpg

│   ├── CMR #分类二

│   |    ├── la_007_0000.jpg 

│   |    ├── la_0010_0000.jpg

├── ... #测试集

│   ├── la_008_0000.jpg 

│   ├── la_009_0000.jpg

│   ├── ...

#### 程序与硬件设施建设

程序：docker + filebrower/nextcloud+deepo+label-studio

硬件设施：nas +显卡？

#### 可视化与云计算

1. 数据增强可视化

2. 数据集制作可视化

3. 训练过程tensorboard可视化
   
   > 运行 tensorboard --logdir=runs --port=6006 --host=localhost #logdir 需自定义
   > 
   > 访问 http://localhost:6006查看过程

4. 新数据的自动收集与再训练

#### 用途及发展方向

- 数据增强
  
  图片转换：eg.T1toT2
  
  去噪音denoise：处理旧的mri文件
  
  数据生成

- 分类

- 分割

- 探测识别

- 模型辅助数据处理
